function mapOpenBalloon(n,o){infoWindow.setPosition(n.getPosition()),infoWindow.setContent(o),infoWindow.open(map,n)}function mapPutMarker(n,o,e,a,t){var p=n+":"+o;mapPoints[p]?(o+=.02*(Math.random()-.5),n+=.02*(Math.random()-.5)):mapPoints[p]=!0;var m=new google.maps.LatLng(n,o),i={map:map,title:e,icon:a,position:m},s=new google.maps.Marker(i);return google.maps.event.addListener(s,"click",function(){t&&("function"==typeof t?t(s):jQuery.ajax({url:t,success:function(n){mapOpenBalloon(s,jQuery(n).html())}}))}),mapBounds.extend(m),s}function mapLoad(n,o){n||(n=4),o||(o=new google.maps.LatLng(0,0)),map=new google.maps.Map(document.getElementById("map"),{zoom:n,center:o,mapTypeId:google.maps.MapTypeId.ROADMAP}),mapBounds=new google.maps.LatLngBounds,infoWindow=new google.maps.InfoWindow({map:map}),google.maps.event.addListener(map,"click",function(){infoWindow.close()})}function mapCenter(n){n||map.fitBounds(mapBounds),map.setCenter(n?n:mapBounds.getCenter())}var map,infoWindow,mapPoints={},mapBounds;