jQuery.iPikaChoose={build:function(i){var i,t={show_captions:!0,slide_enabled:!0,auto_play:!0,show_prev_next:!0,slide_speed:5e3,thumb_width:50,thumb_height:42,buttons:{play:"Play",stop:"Stop",previous:"Previous",next:"Next"}};return $(this).each(function(){function e(){$(this).bind("load",function(){var i=$(this).width(),t=$(this).height();0===i&&(i=$(this).attr("width")),0===t&&(t=$(this).attr("height"));var e=d.thumb_width/i,a=d.thumb_height/t;if(a>e){var s=a,h=(i*s-d.thumb_width)/2*-1;h=Math.round(h),$(this).css({left:h})}else{var s=e;$top=0,$(this).css({top:$top})}var n=Math.round(i*s),r=Math.round(t*s);$(this).css("position","relative"),$(this).width(n).height(r);var l={width:n,height:r};$(this).css(l),$(this).fadeTo(250,.4),$(this).hasClass("pika_first")&&$(this).trigger("click",["auto"])}),$(this).clone(!0).insertAfter(this),$(this).remove(),o=c.children("li").children("img")}function a(){o.bind("click",h),d.slide_enabled&&(d.auto_play?(y=!0,f.hide(),_.show()):(f.show(),_.hide())),s(),m.bind("click",r),w.bind("click",n)}function s(){o.filter(":last").addClass("pika_last"),o.filter(":first").addClass("pika_first"),o.each(function(){var i={width:d.thumb_width+"px",height:d.thumb_height+"px","list-style":"none",overflow:"hidden"};$(this).parent("li").css(i),$(this).hover(function(){$(this).fadeTo(250,1)},function(){$(this).hasClass("pika_selected")||$(this).fadeTo(250,.4)})})}function h(i,t){"auto"!=t&&(d.slide_enabled&&(_.hide(),f.show(),y=!1),v.stop(),v.dequeue());var e=$(this).attr("src"),a=$(this).attr("ref"),s=$(this).attr("title");o.filter(".pika_selected").fadeTo(250,.4),o.filter(".pika_selected").removeClass("pika_selected"),$(this).fadeTo(250,1),$(this).addClass("pika_selected"),v.fadeTo(500,.05,function(){k.attr("src",e),C.attr("href",a),d.show_captions&&b.html(s)}),v.fadeTo(800,1,function(){y&&$(this).animate({top:0},d.slide_speed,function(){y&&w.trigger("click",["auto"])})})}function n(i,t){o.filter(".pika_selected").hasClass("pika_last")?o.filter(":first").trigger("click",t):o.filter(".pika_selected").parent("li").next("li").children("img").trigger("click",t)}function r(i,t){o.filter(".pika_selected").hasClass("pika_first")?o.filter(":last").trigger("click",t):o.filter(".pika_selected").parent("li").prev("li").children("img").trigger("click",t)}function l(){p.hover(function(){u.fadeIn(400)},function(){u.fadeOut(400)}),f.bind("click",function(){y=!0,w.trigger("click",["auto"]),$(this).hide(),_.show()}),_.bind("click",function(){y=!1,$(this).hide(),f.show()})}var d=$.extend(t,i),o=$(this).children("li").children("img");o.fadeOut(1);var c=$(this);o.each(e),$(this).before("<div class='pika_main'></div>");var p=$(this).prev(".pika_main");if(d.slide_enabled){p.append("<div class='pika_play'></div>");var u=$(this).prev(".pika_main").children(".pika_play");u.html("<a class='pika_play_button'>"+d.buttons.play+"</a><a class='pika_stop_button'>"+d.buttons.stop+"</a>"),u.fadeOut(1);var f=u.children("a:first"),_=u.children("a:last")}p.append("<div class='pika_subdiv'></div>");var v=p.children(".pika_subdiv");v.append("<img />");var k=v.children("img");if(d.show_captions){v.append("<div class='pika_caption'></div>");var b=v.children(".pika_caption")}$(this).after("<div class='pika_navigation'></div>");var g=$(this).next(".pika_navigation");g.prepend("<a>"+d.buttons.previous+"</a> :: <a>"+d.buttons.next+"</a>");var m=g.children("a:first"),w=g.children("a:last");d.show_prev_next||g.css("display","none");var y=d.auto_play;k.wrap("<a></a>");var C=k.parent("a");d.slide_enabled&&l(),a()})}},jQuery.fn.PikaChoose=jQuery.iPikaChoose.build;