!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=r(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function i(e){var n,i=this;if(null!=e)t.call(i),i.each(function(t,n){var i;(i=tinymce.get(n.id))&&i.setContent(e)});else if(i.length>0&&(n=tinymce.get(i[0].id)))return n.getContent()}function r(e){var t=null;return e&&e.id&&c.tinymce&&(t=tinymce.get(e.id)),t}function a(e){return!!(e&&e.length&&c.tinymce&&e.is(":tinymce"))}var o={};e.each(["text","html","val"],function(t,c){var u=o[c]=e.fn[c],s="text"===c;e.fn[c]=function(t){var c=this;if(!a(c))return u.apply(c,arguments);if(t!==n)return i.call(c.filter(":tinymce"),t),u.apply(c.not(":tinymce"),arguments),c;var o="",l=arguments;return(s?c:c.eq(0)).each(function(t,n){var i=r(n);o+=i?s?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):u.apply(e(n),l)}),o}}),e.each(["append","prepend"],function(t,i){var c=o[i]=e.fn[i],u="prepend"===i;e.fn[i]=function(e){var t=this;return a(t)?e!==n?("string"==typeof e&&t.filter(":tinymce").each(function(t,n){var i=r(n);i&&i.setContent(u?e+i.getContent():i.getContent()+e)}),c.apply(t.not(":tinymce"),arguments),t):void 0:c.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,i){var r=o[i]=e.fn[i];e.fn[i]=function(){return t.call(this,i),r.apply(this,arguments)}}),o.attr=e.fn.attr,e.fn.attr=function(t,c){var u=this,s=arguments;if(!t||"value"!==t||!a(u))return c!==n?o.attr.apply(u,s):o.attr.apply(u,s);if(c!==n)return i.call(u.filter(":tinymce"),c),o.attr.apply(u.not(":tinymce"),s),u;var l=u[0],m=r(l);return m?m.getContent({save:!0}):o.attr.apply(e(l),s)}}var n,i,r,a=[],c=window;e.fn.tinymce=function(n){function o(){var i=[],a=0;r||(t(),r=!0),m.each(function(e,t){var r,c=t.id,o=n.oninit;c||(t.id=c=tinymce.DOM.uniqueId()),tinymce.get(c)||(r=new tinymce.Editor(c,n,tinymce.EditorManager),i.push(r),r.on("init",function(){var e,t=o;m.css("visibility",""),o&&++a==i.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,i))}))}),e.each(i,function(e,t){t.render()})}var u,s,l,m=this,p="";if(!m.length)return m;if(!n)return window.tinymce?tinymce.get(m[0].id):null;if(m.css("visibility","hidden"),c.tinymce||i||!(u=n.script_url))1===i?a.push(o):o();else{i=1,s=u.substring(0,u.lastIndexOf("/")),-1!=u.indexOf(".min")&&(p=".min"),c.tinymce=c.tinyMCEPreInit||{base:s,suffix:p},-1!=u.indexOf("gzip")&&(l=n.language||"en",u=u+(/\?/.test(u)?"&":"?")+"js=true&core=true&suffix="+escape(p)+"&themes="+escape(n.theme||"modern")+"&plugins="+escape(n.plugins||"")+"&languages="+(l||""),c.tinyMCE_GZ||(c.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+l+".js"),t("themes/"+n.theme+"/theme"+p+".js"),t("themes/"+n.theme+"/langs/"+l+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+p+".js"),t("plugins/"+n+"/langs/"+l+".js"))})},end:function(){}}));var f=document.createElement("script");f.type="text/javascript",f.onload=f.onreadystatechange=function(t){t=t||window.event,2===i||"load"!=t.type&&!/complete|loaded/.test(f.readyState)||(tinymce.dom.Event.domLoaded=1,i=2,n.script_loaded&&n.script_loaded(),o(),e.each(a,function(e,t){t()}))},f.src=u,document.body.appendChild(f)}return m},e.extend(e.expr[":"],{tinymce:function(e){var t;return e.id&&"tinymce"in window&&(t=tinymce.get(e.id),t&&t.editorManager===tinymce)?!0:!1}})}(jQuery);